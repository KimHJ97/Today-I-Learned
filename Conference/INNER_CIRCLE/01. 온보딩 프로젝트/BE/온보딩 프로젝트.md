# 온보딩 프로젝트

 - 설문조사 서비스 구현

<br/>

## 기능 요구사항

설문조사 서비스는 설문조사 양식을 만들고, 만들어진 양식을 기반으로 응답을 받을 수 있는 서비스이다.  
 - 설문조사 양식은 "설문조사 이름", "설문조사 설명", "설문조사 항목" 구성으로 이루어져있다.
 - 설문조사 항목은 "항목 이름", "항목 설명", "항목 입력 형태", "항목 필수 여부" 구성으로 이루어져 있다.
 - 항목 입력 형태는 "단답형", "장문형", "단일 선택 리스트", "다중 선택 리스트" 구성으로 이루어져 있다.

<br/>

### API 설계

 - 설문조사 생성 API
    - URL: /api/survey
    - HTTP Method: POST
 - 설문조사 수정 API
    - URL: /api/survey/{surveyId}
    - HTTP Method: PUT
 - 설문조사 응답 제출 API
    - URL: /api/survey/{surveyId}/answer
    - HTTP Method: POST
 - 설문조사 응답 조회 API
    - HTTP Method: api/survey/{surveyId}/answer/{surveyAnswerId}
    - HTTP Method: GET

<br/>

### 주의 사항

 - 설문조사 양식이 변경되어도 기존에 설문조사 응답 내용은 이전 내용이 보여져야 한다.
    - 설문조사 응답시 기존 응답에 대한 스냅샷을 보존해야 한다.
    - 설문조사 양식에서 항목이 제거되어도 기존에 응답한 모든 항목을 확인할 수 있어야 한다.
    - 설문조사 양식에 항목의 내용이 변경되어도 기존에 응답한 내용으로 확인할 수 있어야 한다.

#### 주의사항에 따른 DB 설계

 - `1안. 설문조사 양식과 설문조사 항목에 내용을 스냅샷으로 저장`
    - 설문조사 양식에 대한 내용을 계속해서 저장하는 방식을 이용한다. 설문조사에서는 현재 내용에 대한 FK을 저장한다.
    - 설문조사 항목에 대한 내용을 계속해서 저장하는 방식을 이용한다. 설문조사 항목에서는 현재 내용에 대한 FK를 저장한다.
    - 설문조사 응답에서는 제출 시점에 설문조사 양식 내용과 설문조사 항목 내용에 대한 PK만을 갖고 있는다.
    - __단점__
        - 내용에 수정될 때마다 계속해서 데이터가 쌓인다.
        - 복잡하다.
```
Survey: 설문조사 양식
    - id(PK)
    - contentId(FK)
    - createdAt
    - updatedAt


SurveyContent: 설문조사 양식 내용(스냅샷)
    - id(PK)
    - surveyId(FK)
    - name
    - description
    - createdAt


SurveyItem: 설문조사 항목
    - id(PK)
    - surveyId(FK)
    - contentId(FK)
    - createdAt
    - updatedAt


SurveyItemContent: 설문조사 항목 내용(스냅샷)
    - id(PK)
    - surveyItemId(FK)
    - name
    - description
    - type
    - required
    - createdAt


survey_answer: 설문조사 응답
    - id
    - surveyId(FK) -> 조회 편의용 FK
    - surveyContentId(FK)
    - surveyItemContentId(FK)
```
<br/>

 - `2안. 설문조사 응답 생성시에 해당 시점에 대한 양식과 항목 내용을 저장한다.`
    - 장점은 단순하다.
    - 단점은 응답자가 많을 수록 해당 시점에 대한 중복 필드가 쌓인다.
```
survey: 설문조사 양식
    - id(PK)
    - name
    - description
    - createdAt
    - updatedAt

survey_item: 설문조사 항목
    - id(PK)
    - surveyId(FK)
    - name
    - description
    - type
    - required
    - createdAt
    - updatedAt

survey_item_choice: 설문조사 항목 선택 옵션
    - id(PK)
    - surveyItemId(FK)
    - text

survey_item_answer: 설문조사 항목 답변
    - id(PK)
    - surveyId(FK)
    - surveyItemId(FK)
    - surveyName
    - surveyDescription
    - surveyItemName
    - surveyItemDescription
    - surveyItemType
    - surveyItemRequired
    - answer

survey_item_answer_choice: 설문조사 항목 답변 선택
    - id(PK)
    - surveyItemAnswerId(FK)
    - surveyItemChoiceId(FK)
    - text
    - isChecked
```
<br/>
